[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "life_exp",
    "section": "",
    "text": "library(tidyverse)  \n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(sf)         \n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\nlibrary(mapview)    \n\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n\nlibrary(leaflet) \nlibrary(dplyr)\nlibrary(leafpop)\nlibrary(readr)\n\n\nmd &lt;- read_sf(\"/Users/mkheyfets/Documents/Maryland_Physical_Boundaries_-_County_Boundaries_(Generalized)\")\nlife_exp &lt;- read_csv(\"scatterplot/SHIP_Life_Expectancy_2010-2020_20231228.csv\")\n\nRows: 24 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Jurisdiction\ndbl (1): Life_Expectancy\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlife_exp_j &lt;- life_exp %&gt;% \n  rename(\"county\" = \"Jurisdiction\") \nlife_exp_md &lt;- full_join(md, life_exp_j)\n\nJoining with `by = join_by(county)`\n\n\n\npal &lt;- colorRampPalette(c(\"#ff1a1a\", \"#ffa142\", \"#ccff66\"))\nmapview(life_exp_md,\n        label=life_exp_md$county,\n        zcol=\"Life_Expectancy\",\n        col.regions=pal(6),\n        at = (seq(min(life_exp_md$Life_Expectancy), max(life_exp_md$Life_Expectancy), length.out = 6)),\n        legend = TRUE,\n        layer.name = \"2018-2020 Life Expectancy in Years\",\n        popup=popupTable(life_exp_md, zcol = c(\"Life_Expectancy\")))"
  },
  {
    "objectID": "home.html",
    "href": "home.html",
    "title": "Using 2018-2020 SHIP life expectancy data and 2016-2020 ACS socioeconomic characteristics data of Maryland Counties, I will be demonstrating how to conduct a logistic regression predicting the odds of a given county having above state average life expectancy using R.",
    "section": "",
    "text": "Mapping the Data\n\nlibrary(tidyverse)  \n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(sf)         \n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\nlibrary(mapview)    \n\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n\nlibrary(leaflet) \nlibrary(dplyr)\nlibrary(leafpop)\nlibrary(readr)\n\n\nmd &lt;- read_sf(\"/Users/mkheyfets/Documents/Maryland_Physical_Boundaries_-_County_Boundaries_(Generalized)\")\nlife_exp &lt;- read_csv(\"scatterplot/SHIP_Life_Expectancy_2010-2020_20231228.csv\")\n\nRows: 24 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Jurisdiction\ndbl (1): Life_Expectancy\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlife_exp_j &lt;- life_exp %&gt;% \n  rename(\"county\" = \"Jurisdiction\") \nlife_exp_md &lt;- full_join(md, life_exp_j)\n\nJoining with `by = join_by(county)`\n\n\n\npal &lt;- colorRampPalette(c(\"#ff1a1a\", \"#ffa142\", \"#ccff66\"))\nmapview(life_exp_md,\n        label=life_exp_md$county,\n        zcol=\"Life_Expectancy\",\n        col.regions=pal(6),\n        at = (seq(min(life_exp_md$Life_Expectancy), max(life_exp_md$Life_Expectancy), length.out = 6)),\n        legend = TRUE,\n        layer.name = \"2018-2020 Life Expectancy in Years\",\n        popup=popupTable(life_exp_md, zcol = c(\"Life_Expectancy\")))"
  },
  {
    "objectID": "home.html#mapping-the-data",
    "href": "home.html#mapping-the-data",
    "title": "Using 2018-2020 SHIP life expectancy data and 2016-2020 ACS socioeconomic characteristics data of Maryland Counties, I will be demonstrating how to conduct a logistic regression predicting the odds of a given county having above state average life expectancy using R.",
    "section": "",
    "text": "library(tidyverse)  \n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(sf)         \n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\nlibrary(mapview)    \n\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n\nlibrary(leaflet) \nlibrary(dplyr)\nlibrary(leafpop)\nlibrary(readr)\n\n\nmd &lt;- read_sf(\"/Users/mkheyfets/Documents/Maryland_Physical_Boundaries_-_County_Boundaries_(Generalized)\")\nlife_exp &lt;- read_csv(\"scatterplot/SHIP_Life_Expectancy_2010-2020_20231228.csv\")\n\nRows: 24 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Jurisdiction\ndbl (1): Life_Expectancy\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlife_exp_j &lt;- life_exp %&gt;% \n  rename(\"county\" = \"Jurisdiction\") \nlife_exp_md &lt;- full_join(md, life_exp_j)\n\nJoining with `by = join_by(county)`\n\n\n\npal &lt;- colorRampPalette(c(\"#ff1a1a\", \"#ffa142\", \"#ccff66\"))\nmapview(life_exp_md,\n        label=life_exp_md$county,\n        zcol=\"Life_Expectancy\",\n        col.regions=pal(6),\n        at = (seq(min(life_exp_md$Life_Expectancy), max(life_exp_md$Life_Expectancy), length.out = 6)),\n        legend = TRUE,\n        layer.name = \"2018-2020 Life Expectancy in Years\",\n        popup=popupTable(life_exp_md, zcol = c(\"Life_Expectancy\")))"
  },
  {
    "objectID": "background.html",
    "href": "background.html",
    "title": "Background",
    "section": "",
    "text": "Background\nUsing 2018-2020 SHIP life expectancy data and 2016-2020 ACS socioeconomic characteristics data of Maryland Counties, I will be conducting a logistic regression in R predicting the odds of a given county having above state average life expectancy, 78.6 years, based on median household income, education level, racial composition, and sex composition.\n\n\nMapping the Data\n\nlibrary(tidyverse)  \n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(sf)         \n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\nlibrary(mapview)    \n\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n\nlibrary(leaflet) \nlibrary(dplyr)\nlibrary(leafpop)\nlibrary(readr)\n\n\nmd &lt;- read_sf(\"Maryland_Physical_Boundaries_-_County_Boundaries_(Generalized)/BNDY_CountyPhyBoundaryGen_DoIT.shp\")\nlife_exp &lt;- read_csv(\"scatterplot/SHIP_Life_Expectancy_2010-2020_20231228.csv\")\n\nRows: 24 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Jurisdiction\ndbl (1): Life_Expectancy\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlife_exp_j &lt;- life_exp %&gt;% \n  rename(\"county\" = \"Jurisdiction\") \nlife_exp_md &lt;- full_join(md, life_exp_j)\n\nJoining with `by = join_by(county)`\n\n\n\npal &lt;- colorRampPalette(c(\"#ff1a1a\", \"#ffa142\", \"#ccff66\"))\nmapview(life_exp_md,\n        label=life_exp_md$county,\n        zcol=\"Life_Expectancy\",\n        col.regions=pal(6),\n        at = (seq(min(life_exp_md$Life_Expectancy), max(life_exp_md$Life_Expectancy), length.out = 6)),\n        legend = TRUE,\n        layer.name = \"2018-2020 Life Expectancy in Years\",\n        popup=popupTable(life_exp_md, zcol = c(\"Life_Expectancy\")))"
  },
  {
    "objectID": "log_reg.html",
    "href": "log_reg.html",
    "title": "Importing, Merging, and Cleaning the Datasets",
    "section": "",
    "text": "Importing, Merging, and Cleaning the Datasets\n\nlibrary(shiny)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(dplyr)\nlibrary(janitor)\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(car)\n\nLoading required package: carData\n\nAttaching package: 'car'\n\nThe following object is masked from 'package:dplyr':\n\n    recode\n\nThe following object is masked from 'package:purrr':\n\n    some\n\n\n\nmd_demo &lt;- read_csv(\"scatterplot/Maryland_Counties_Socioeconomic_Characteristics__2016-2020_from_ACS__20231228.csv\")\n\nRows: 24 Columns: 41\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): Jurisdiction\ndbl (40): Total Households, Population 25 years and older, Less than 9th Gra...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlife_exp &lt;- read_csv(\"scatterplot/SHIP_Life_Expectancy_2010-2020_20231228.csv\")\n\nRows: 24 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Jurisdiction\ndbl (1): Life_Expectancy\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nmd_demo_life &lt;- full_join(life_exp, md_demo)\n\nJoining with `by = join_by(Jurisdiction)`\n\nmd_demo_life &lt;- clean_names(md_demo_life)\n\n\n\nCreating Response and Predictor Variables\n\nmd_demo_life &lt;- md_demo_life %&gt;% \n  mutate(above_below_state_exp = ifelse(life_expectancy &lt; 78.6, 0, 1)) %&gt;% \n  mutate(percent_less_than_9th_grade = ((less_than_9th_grade / population_25_years_and_older)*100)) %&gt;% \n  mutate(percent_white = ((white_alone / total_population)*100)) %&gt;% \n  mutate(percent_male = ((male / voting_age_population)*100)) \n\n\n\nGraphing the Predictors and the Response Variable\nThe linked RShiny application is an interactive scatterplot of the different predictor variables and the probability of whether a county has above state average life expectancy.\n\n\nRunning and Interpreting the Logistic Regression Model\n\nlife_exp.glm &lt;- glm(data = md_demo_life,\n                  formula=above_below_state_exp~ median_household_income + percent_less_than_9th_grade+ percent_white + percent_male,\n                  family = binomial('logit'))\nvif(life_exp.glm)\n\n    median_household_income percent_less_than_9th_grade \n                   2.948459                    1.677129 \n              percent_white                percent_male \n                   3.694162                    2.827112 \n\n\nWhile all of our predictors have a VIF above 1, indicating some level of correlation among each other, none are greater than 10 and the impact of multicollinearity on model estimates should not be significant.\n\nsummary(life_exp.glm)\n\n\nCall:\nglm(formula = above_below_state_exp ~ median_household_income + \n    percent_less_than_9th_grade + percent_white + percent_male, \n    family = binomial(\"logit\"), data = md_demo_life)\n\nCoefficients:\n                              Estimate Std. Error z value Pr(&gt;|z|)  \n(Intercept)                  2.838e+01  3.156e+01   0.899    0.369  \nmedian_household_income      1.024e-04  5.425e-05   1.888    0.059 .\npercent_less_than_9th_grade -7.711e-02  7.058e-01  -0.109    0.913  \npercent_white                7.496e-02  6.678e-02   1.123    0.262  \npercent_male                -8.893e-01  7.895e-01  -1.126    0.260  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 30.553  on 23  degrees of freedom\nResidual deviance: 19.136  on 19  degrees of freedom\nAIC: 29.136\n\nNumber of Fisher Scoring iterations: 6\n\n#Exponentiating the Coefficients\nlife_exp_logOR &lt;- coef(life_exp.glm)\nlife_exp_logOR\n\n                (Intercept)     median_household_income \n              28.3784172621                0.0001024147 \npercent_less_than_9th_grade               percent_white \n              -0.0771141125                0.0749561176 \n               percent_male \n              -0.8893221802 \n\nlife_exp_OR&lt;- exp(life_exp_logOR)\nlife_exp_OR\n\n                (Intercept)     median_household_income \n               2.111495e+12                1.000102e+00 \npercent_less_than_9th_grade               percent_white \n               9.257842e-01                1.077837e+00 \n               percent_male \n               4.109342e-01 \n\n#Exponentiating the Confidence Intervals\nlife_exp_log_CI &lt;- confint(life_exp.glm)\n\nWaiting for profiling to be done...\n\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\nlife_exp_log_CI\n\n                                    2.5 %       97.5 %\n(Intercept)                 -2.566298e+01 1.002245e+02\nmedian_household_income      1.831351e-05 2.344387e-04\npercent_less_than_9th_grade -1.497744e+00 1.462660e+00\npercent_white               -4.238346e-02 2.302383e-01\npercent_male                -2.693035e+00 3.495126e-01\n\nlife_exp_CI &lt;- exp(life_exp_log_CI)\nlife_exp_CI\n\n                                   2.5 %       97.5 %\n(Intercept)                 7.156648e-12 3.364708e+43\nmedian_household_income     1.000018e+00 1.000234e+00\npercent_less_than_9th_grade 2.236341e-01 4.317428e+00\npercent_white               9.585022e-01 1.258900e+00\npercent_male                6.767520e-02 1.418376e+00\n\n\nAt a=0.05, none of the predictors, a county’s median household income, percent of the 25 years and older population with less than a ninth grade population, percent of the total population identifying as white alone, and percent of the voting age population identifying as male, significantly predict whether a given county has above state average life expectancy. However, median household income is approaching significance such that every unit increase in a Maryland county’s median household income predicts a 0.0102% increase in the odds of having an above state average life expectancy, controlling for a county’s race, sex, and education demographics. Moreover the 95% confidence interval for median household income, [1.000018, 1.000234], suggests that these odds are different from 1. The reason why the p value could indicate that median household income is not a significant predictor of above or below state average life expectancy while the confidence interval indicates that median household income’s coefficient is different from the null expectation of 1 (meaning higher and lower income counties indeed have different odds of being above or below state average life expectancy) is because the sample size is pretty small. Maryland only has 24 counties. Moreover, a confidence interval of [1.000018, 1.000234] still indicates a small effect size, even if it is different from 1. For future analyses, assessing census tracts would increase the sample size and might help detect more significant results. Future analyses can also look at other factors, such as amount of green space, insurance coverage, or number of medical facilities, to better predict whether the life expectancy will be above state average.\nAdditionally, the residual deviance is lower than the null deviance, indicating that the model is a better fit than a null model, indicating that a model with a county’s income, education, race, and sex demographics is better able to predict whether a given county has above or below state average life expectancy compared to an intercept-only model."
  }
]